{"version":3,"file":"main.js","sourceRoot":"","sources":["main.ts"],"names":[],"mappings":";;;AAAA,iEAAqC;AACrC,6BAAyC;AACzC,0FAAoD;AAEpD,KAAK,UAAU,GAAG;IAEjB,IACA;QACC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC,YAAY,EAAE,CAAC,CAAA;QACrC,MAAM,IAAA,sBAAiB,GAAE;aACvB,IAAI,CAAC,IAAI,CAAC,EAAE;YACZ,IAAI,aAAJ,IAAI,cAAJ,IAAI,IAAJ,IAAI,GAAK,EAAS,EAAC;YAEnB,IAAI,CAAC,IAAI,CAAC,IAAI,EACd;gBACC,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAA;aAClC;iBACI,IAAI,IAAI,CAAC,gBAAgB,EAC9B;gBACC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAA,uBAAY,EAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAA;aACpE;iBAED;gBACC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAA;aAC9B;YAED,IAAI,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;QAC5D,CAAC,CAAC,CACF;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC,YAAY,EAAE,CAAC,CAAA;QAErC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,IAAI,EAAE,CAAC,YAAY,EAAE,CAAC,CAAA;KACjD;IACD,OAAO,KAAK,EACZ;QACC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;KAC7B;AACF,CAAC;AAED,kBAAe,GAAG,EAAE,CAAA","sourcesContent":["import * as core from '@actions/core'\nimport { autoDeduplication } from './fn';\nimport yarnLockDiff from '@yarn-tool/yarnlock-diff';\n\nasync function run(): Promise<void>\n{\n\ttry\n\t{\n\t\tcore.debug(new Date().toTimeString())\n\t\tawait autoDeduplication()\n\t\t\t.then(data => {\n\t\t\t\tdata ??= {} as any;\n\n\t\t\t\tif (!data.file)\n\t\t\t\t{\n\t\t\t\t\tcore.error(`yarn.lock not exists`)\n\t\t\t\t}\n\t\t\t\telse if (data.yarnlock_changed)\n\t\t\t\t{\n\t\t\t\t\tcore.info('\\n' + yarnLockDiff(data.yarnlock_old, data.yarnlock_new))\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcore.info(`yarn.lock is good`)\n\t\t\t\t}\n\n\t\t\t\tcore.setOutput('yarnlock_changed', !!data.yarnlock_changed)\n\t\t\t})\n\t\t;\n\t\tcore.debug(new Date().toTimeString())\n\n\t\tcore.setOutput('time', new Date().toTimeString())\n\t}\n\tcatch (error)\n\t{\n\t\tcore.setFailed(error.message)\n\t}\n}\n\nexport default run()\n"]}